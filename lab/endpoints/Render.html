<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Render Endpoint | IBM Embedded Business AI Framework</title>
    <meta name="description" content="Ask, get answers, and automate in the language of your business.">
    
    
    <link rel="preload" href="/eba-docs/assets/css/0.styles.a050cb89.css" as="style"><link rel="preload" href="/eba-docs/assets/js/app.3403747c.js" as="script"><link rel="preload" href="/eba-docs/assets/js/76.0b3be451.js" as="script"><link rel="prefetch" href="/eba-docs/assets/js/10.a32de72a.js"><link rel="prefetch" href="/eba-docs/assets/js/11.7044a9ed.js"><link rel="prefetch" href="/eba-docs/assets/js/12.d7473428.js"><link rel="prefetch" href="/eba-docs/assets/js/13.169b8d24.js"><link rel="prefetch" href="/eba-docs/assets/js/14.b0b51c99.js"><link rel="prefetch" href="/eba-docs/assets/js/15.9cd811bd.js"><link rel="prefetch" href="/eba-docs/assets/js/16.f04cedd8.js"><link rel="prefetch" href="/eba-docs/assets/js/17.53a4311b.js"><link rel="prefetch" href="/eba-docs/assets/js/18.4be7aa54.js"><link rel="prefetch" href="/eba-docs/assets/js/19.43a4c087.js"><link rel="prefetch" href="/eba-docs/assets/js/2.9ead8820.js"><link rel="prefetch" href="/eba-docs/assets/js/20.2339fd9b.js"><link rel="prefetch" href="/eba-docs/assets/js/21.3f6d0150.js"><link rel="prefetch" href="/eba-docs/assets/js/22.dbc8515d.js"><link rel="prefetch" href="/eba-docs/assets/js/23.01e88cbf.js"><link rel="prefetch" href="/eba-docs/assets/js/24.9ce21ebf.js"><link rel="prefetch" href="/eba-docs/assets/js/25.fac08eed.js"><link rel="prefetch" href="/eba-docs/assets/js/26.51bd2028.js"><link rel="prefetch" href="/eba-docs/assets/js/27.9b14d585.js"><link rel="prefetch" href="/eba-docs/assets/js/28.6d8a0e25.js"><link rel="prefetch" href="/eba-docs/assets/js/29.2afef2db.js"><link rel="prefetch" href="/eba-docs/assets/js/3.37272d66.js"><link rel="prefetch" href="/eba-docs/assets/js/30.b79d6fb3.js"><link rel="prefetch" href="/eba-docs/assets/js/31.00a35a55.js"><link rel="prefetch" href="/eba-docs/assets/js/32.9f5c7ef0.js"><link rel="prefetch" href="/eba-docs/assets/js/33.24efcc25.js"><link rel="prefetch" href="/eba-docs/assets/js/34.8190f982.js"><link rel="prefetch" href="/eba-docs/assets/js/35.85e05e0d.js"><link rel="prefetch" href="/eba-docs/assets/js/36.eb510061.js"><link rel="prefetch" href="/eba-docs/assets/js/37.ae51f5dc.js"><link rel="prefetch" href="/eba-docs/assets/js/38.90371885.js"><link rel="prefetch" href="/eba-docs/assets/js/39.f0862eda.js"><link rel="prefetch" href="/eba-docs/assets/js/4.8cb4e5bb.js"><link rel="prefetch" href="/eba-docs/assets/js/40.14bfb347.js"><link rel="prefetch" href="/eba-docs/assets/js/41.69f593cb.js"><link rel="prefetch" href="/eba-docs/assets/js/42.d21204d2.js"><link rel="prefetch" href="/eba-docs/assets/js/43.de3ea1ef.js"><link rel="prefetch" href="/eba-docs/assets/js/44.30720a9c.js"><link rel="prefetch" href="/eba-docs/assets/js/45.a4790e9d.js"><link rel="prefetch" href="/eba-docs/assets/js/46.c4c990b9.js"><link rel="prefetch" href="/eba-docs/assets/js/47.5909ea53.js"><link rel="prefetch" href="/eba-docs/assets/js/48.16a24e76.js"><link rel="prefetch" href="/eba-docs/assets/js/49.0b002da0.js"><link rel="prefetch" href="/eba-docs/assets/js/5.2e8299f6.js"><link rel="prefetch" href="/eba-docs/assets/js/50.eaec7ada.js"><link rel="prefetch" href="/eba-docs/assets/js/51.297b3c00.js"><link rel="prefetch" href="/eba-docs/assets/js/52.5a644261.js"><link rel="prefetch" href="/eba-docs/assets/js/53.0f2fd27a.js"><link rel="prefetch" href="/eba-docs/assets/js/54.8c36764e.js"><link rel="prefetch" href="/eba-docs/assets/js/55.18fed56a.js"><link rel="prefetch" href="/eba-docs/assets/js/56.88530eb3.js"><link rel="prefetch" href="/eba-docs/assets/js/57.4515f1ed.js"><link rel="prefetch" href="/eba-docs/assets/js/58.3f11c74e.js"><link rel="prefetch" href="/eba-docs/assets/js/59.bd0bf126.js"><link rel="prefetch" href="/eba-docs/assets/js/6.8e37d59a.js"><link rel="prefetch" href="/eba-docs/assets/js/60.e411ccaa.js"><link rel="prefetch" href="/eba-docs/assets/js/61.965f1943.js"><link rel="prefetch" href="/eba-docs/assets/js/62.2db18915.js"><link rel="prefetch" href="/eba-docs/assets/js/63.60826fcb.js"><link rel="prefetch" href="/eba-docs/assets/js/64.4e484809.js"><link rel="prefetch" href="/eba-docs/assets/js/65.75d25a76.js"><link rel="prefetch" href="/eba-docs/assets/js/66.13ac7a55.js"><link rel="prefetch" href="/eba-docs/assets/js/67.a81a1021.js"><link rel="prefetch" href="/eba-docs/assets/js/68.8015ea0e.js"><link rel="prefetch" href="/eba-docs/assets/js/69.35bf8592.js"><link rel="prefetch" href="/eba-docs/assets/js/7.08c48c2f.js"><link rel="prefetch" href="/eba-docs/assets/js/70.b92e58ef.js"><link rel="prefetch" href="/eba-docs/assets/js/71.7aff4272.js"><link rel="prefetch" href="/eba-docs/assets/js/72.2b042f12.js"><link rel="prefetch" href="/eba-docs/assets/js/73.479400e8.js"><link rel="prefetch" href="/eba-docs/assets/js/74.f3d49b29.js"><link rel="prefetch" href="/eba-docs/assets/js/75.644e4dc2.js"><link rel="prefetch" href="/eba-docs/assets/js/77.70aab8b4.js"><link rel="prefetch" href="/eba-docs/assets/js/78.6fbb3df5.js"><link rel="prefetch" href="/eba-docs/assets/js/79.1bf27678.js"><link rel="prefetch" href="/eba-docs/assets/js/8.b2913ca0.js"><link rel="prefetch" href="/eba-docs/assets/js/80.49bf67da.js"><link rel="prefetch" href="/eba-docs/assets/js/81.0e9cf2a3.js"><link rel="prefetch" href="/eba-docs/assets/js/82.950f02ed.js"><link rel="prefetch" href="/eba-docs/assets/js/83.700f35b5.js"><link rel="prefetch" href="/eba-docs/assets/js/84.e4c45909.js"><link rel="prefetch" href="/eba-docs/assets/js/85.b6641e48.js"><link rel="prefetch" href="/eba-docs/assets/js/86.90df0881.js"><link rel="prefetch" href="/eba-docs/assets/js/87.5f40b4e9.js"><link rel="prefetch" href="/eba-docs/assets/js/88.cf2561a2.js"><link rel="prefetch" href="/eba-docs/assets/js/89.451fd7d4.js"><link rel="prefetch" href="/eba-docs/assets/js/9.33bb6af0.js"><link rel="prefetch" href="/eba-docs/assets/js/90.8b80a1bb.js"><link rel="prefetch" href="/eba-docs/assets/js/91.b992b61a.js"><link rel="prefetch" href="/eba-docs/assets/js/92.46fad1a2.js"><link rel="prefetch" href="/eba-docs/assets/js/93.af59df59.js"><link rel="prefetch" href="/eba-docs/assets/js/94.ce81afd6.js"><link rel="prefetch" href="/eba-docs/assets/js/95.31f5c147.js"><link rel="prefetch" href="/eba-docs/assets/js/96.e34e9e41.js"><link rel="prefetch" href="/eba-docs/assets/js/97.cf82a727.js"><link rel="prefetch" href="/eba-docs/assets/js/98.9a555d93.js"><link rel="prefetch" href="/eba-docs/assets/js/99.df53cfaf.js">
    <link rel="stylesheet" href="/eba-docs/assets/css/0.styles.a050cb89.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/eba-docs/" class="home-link router-link-active"><!----> <span class="site-name">IBM Embedded Business AI Framework</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/eba-docs/about/" class="nav-link">About</a></div><div class="nav-item"><a href="/eba-docs/guide/LandingPage.html" class="nav-link">Documentation</a></div><div class="nav-item"><a href="/eba-docs/release/ReleaseNotes.html" class="nav-link">Release Notes</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Use it now</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://eba.ibm.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Launch in Web
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://ibm.box.com/shared/static/m7wm02x2qdevpacf2u1ugj6koapr37ta.dmg" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Download as App
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://slack.com/oauth/authorize?client_id=14390917878.401235455793&amp;scope=bot,users.profile:read&amp;redirect_uri=https%3a%2f%2feba.ibm.com%2fslack%2foauth" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Add to Slack
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <a href="https://github.com/louisroehrs/eba-docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/eba-docs/about/" class="nav-link">About</a></div><div class="nav-item"><a href="/eba-docs/guide/LandingPage.html" class="nav-link">Documentation</a></div><div class="nav-item"><a href="/eba-docs/release/ReleaseNotes.html" class="nav-link">Release Notes</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Use it now</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://eba.ibm.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Launch in Web
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://ibm.box.com/shared/static/m7wm02x2qdevpacf2u1ugj6koapr37ta.dmg" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Download as App
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://slack.com/oauth/authorize?client_id=14390917878.401235455793&amp;scope=bot,users.profile:read&amp;redirect_uri=https%3a%2f%2feba.ibm.com%2fslack%2foauth" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Add to Slack
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <a href="https://github.com/louisroehrs/eba-docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading open"><span>About</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/eba-docs/about/" class="sidebar-link">This is EBA</a></li><li><a href="/eba-docs/about/About.html" class="sidebar-link">Why EBA?</a></li><li><a href="/eba-docs/about/Features.html" class="sidebar-link">Features</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Programming</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Development Lab</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Example agents</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Integrations</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Articles</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Release notes</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content"><h2 id="render-endpoint"><a href="#render-endpoint" aria-hidden="true" class="header-anchor">#</a> Render Endpoint</h2> <p>EBA can provide native rendering for a few popular communication channels. Currently, we support Slack and Watson Workspace. The rendering format is, of course, dependent upon the api exposed by such channels. Be advised that EBA already has a default mechanism for rendering messages in such channels. By default, Watson will take a clickable snapshot of the original message that would otherwise be rendered within our web application and post it as an image link to the channel. Within the channel, this message can be clicked to engage into a full view of the message data. You should consider using the render endpoint if you desire to override this default behavior by using the native formatting provided by a particular channel. Within the endpoint, you will have the following information supplied as input:</p> <ul><li>channel -- the name of the channel, so you can render appropriately for each</li> <li>message -- a node contains the natural language text, concept name and the data to be rendered</li></ul> <p>If node data size exceeds certain limit it maybe be represented as lazy data. The best way to handle such cases is to use the helper function which will request the actual node data in the case it's represented as lazy data.</p> <p>Slack Example:</p> <div class="language- extra-class"><pre class="language-text"><code>const eba = require('eba')

async function render(channel, h) {
    if (channel == 'slack') {
        if (h.getName('message') == 'wmt:Products') {
            let data = await h.get('message')
            let attachments = data.map(renderProduct)
            return {
                text: h.getMeta('message').text,
                attachments: attachments
            }
        }
    
        if (h.getName('message') == 'wmt:Product') {
            let data = await h.get('message')
            return {
                text: h.getMeta('message').text,
                attachments: [renderProduct(data)]
            }
        }
    }
}

module.exports.main = async function (params) {
    let result = await render(params.input.channel, new eba.Params(params))
    if (result) {
        return { output: result }
    } else {
        return {}
    }
}
</code></pre></div><p>For full documentation and interactive explorer on Slack's message format, consult their <a href="https://api.slack.com/docs/messages" target="_blank" rel="noopener noreferrer">official docs<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>Workspace Example:</p> <div class="language- extra-class"><pre class="language-text"><code>const eba = require('eba')
const {toCSV} = require('./util.js')
const _ = require('lodash')

async function render(channel, h) {
    let name = h.getName('message')

    if (channel == 'workspace' &amp;&amp; name == 'sc:Orders') {
        let token = h.getMeta('message')
        let data = await h.get('message')

        return [
            { text: token.text , title: _.trimStart(name, 'sc:')},
            { name: 'orders.csv', body: Buffer.from(toCSV(data)).toString('base64') }
        ]
    }
}

module.exports.main = async function (params) {
    let result = await render(params.input.channel, new eba.Params(params))
    if (result) {
        return { output: result }
    } else {
        return {}
    }
}
</code></pre></div><p>Workspace supports two types of render formats--Message, File, or a JSON array of both.</p> <p>Message:</p> <pre><code>- text: the actual natural language text answering users question
- title: title heading displayed over response
- color: the color of nl text
- actor: the entity responsible for sending the message
</code></pre> <p>File:</p> <pre><code>- name: the name of the file attachment
- body: data content of the attachment (must be base64 encoded)
- dims: dimensions of the image attachment (used for images only)
</code></pre> <p>The example above demonstrates how to send an array of both types of formats.</p></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/louisroehrs/eba-docs/edit/master/docs/lab/endpoints/Render.md" target="_blank" rel="noopener noreferrer">edit</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></div> <!----> </div> <!----></div></div>
    <script src="/eba-docs/assets/js/app.3403747c.js" defer></script><script src="/eba-docs/assets/js/76.0b3be451.js" defer></script>
  </body>
</html>
